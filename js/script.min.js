document.addEventListener("DOMContentLoaded",(()=>{document.body.classList.add("loaded");const e=document.querySelector(".site-header");if(!e)return;const t=e.querySelector(".menu-toggle"),n=e.querySelector("nav");if(!t||!n)return;let o=null;function d(e){n.classList.toggle("open",e),t.setAttribute("aria-expanded",e),document.body.classList.toggle("menu-open",e),t.textContent=e?"Fermer":"Menu",e?(o=document.activeElement,(n.querySelector("a")||t).focus()):o&&o.focus()}t.addEventListener("click",(()=>{d(!n.classList.contains("open"))})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&n.classList.contains("open")&&d(!1)}))})),window.addEventListener("pageshow",(e=>{e.persisted&&document.body.classList.add("loaded")})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".load-more"),t=document.querySelector(".card-grid");if(!e||!t||e.hidden)return;let n=2;const o=e.textContent;e.addEventListener("click",async()=>{e.disabled=!0,e.textContent="Chargementâ€¦";try{const d=await fetch(`/blog/page-${n}.html`);if(!d.ok)throw new Error("no more");const c=await d.text(),r=new DOMParser().parseFromString(c,"text/html"),a=r.querySelectorAll(".card-grid .card");a.forEach((n=>t.appendChild(n))),n++,e.disabled=!1,e.textContent=o,r.querySelector(".load-more")||(e.hidden=!0)}catch(t){e.textContent="Plus d'articles",setTimeout((()=>{e.hidden=!0}),1500)}})}));
