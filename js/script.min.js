function sanitizeInput(input) {const div = document.createElement('div');div.textContent = input;return div.innerHTML;}window.sanitizeInput = sanitizeInput;function initMenu() {const header = document.querySelector('.site-header');const toggle = header ? header.querySelector('.menu-toggle') : null;const nav = header ? header.querySelector('nav') : null;if (nav && toggle) {toggle.addEventListener('click', () => {const open = nav.classList.toggle('open');toggle.setAttribute('aria-expanded', open);});}if (nav) {const path = window.location.pathname.replace(/\/$/, '') || '/';nav.querySelectorAll('a').forEach(link => {const linkPath = new URL(link.href).pathname.replace(/\/$/, '') || '/';if (linkPath === path) {link.setAttribute('aria-current', 'page');}});}}document.addEventListener('DOMContentLoaded', () => {['header', 'footer'].forEach(name => {const el = document.getElementById(`${name}-placeholder`);if (el) {fetch(`/components/${name}.html`).then(res => res.text()).then(html => {el.innerHTML = html;if (name === 'header') initMenu();});}});document.body.classList.add('loaded');});window.addEventListener('beforeunload', () => {document.body.classList.remove('loaded');});window.addEventListener('pageshow', () => {document.body.classList.add('loaded');});(() => {const SPEED = 40;const scroller = document.getElementById('hero-scroller');if (!scroller) return;const content = scroller.querySelector('.scroller__content');if (!content) return;const alreadyCloned = scroller.querySelectorAll('.scroller__content').length > 1;if (!alreadyCloned) {const clone = content.cloneNode(true);clone.setAttribute('aria-hidden', 'true');scroller.appendChild(clone);}function setDuration() {const width = content.scrollWidth + parseFloat(getComputedStyle(scroller).gap || 0);const duration = width / SPEED;scroller.style.setProperty('--duration', `${duration}s`);}setDuration();let to;window.addEventListener('resize', () => {clearTimeout(to);to = setTimeout(setDuration, 150);});})();document.addEventListener('DOMContentLoaded', () => {const elements = document.querySelectorAll('.fade-in');if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {elements.forEach(el => el.classList.add('in-view'));return;}const observer = new IntersectionObserver(entries => {entries.forEach(entry => {if (entry.isIntersecting) {entry.target.classList.add('in-view');observer.unobserve(entry.target);}});});elements.forEach(el => observer.observe(el));});document.addEventListener('DOMContentLoaded', () => {const navLinks = document.querySelectorAll('.secondary-nav a[data-filter]');const cards = document.querySelectorAll('.project-card');navLinks.forEach(link => {link.addEventListener('click', e => {const category = link.getAttribute('data-filter');if (category) {e.preventDefault();navLinks.forEach(l => {l.classList.remove('active');l.removeAttribute('aria-current');});link.classList.add('active');link.setAttribute('aria-current', 'page');cards.forEach(card => {const cardCategory = card.getAttribute('data-category');card.style.display =category === 'Featured' || cardCategory === category? '': 'none';});}});});});